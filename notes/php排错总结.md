---
title: php排错总结
date: 2016-06-25 21:11:21
tags: 
- 排错
categories: phper
---
记录下今天，排错遇到的一些状况。  
今天，想进项目的后台，账户密码都没错，却进不了后台。用的是Ajax提交过去的，然后F12看了下，xx文件没有写权限。   
因为这个项目，我只是刚接手过来，主要负责维护以及修复系统功能出现的Bug。   

另外，需要说明一点就是，之前，项目交接给我的时候，这个项目的后台是可以进去的。而现在，却不知道为什么进不去了。而，具体原因，后面会提到。在这里，要说一句：
>既然项目出现错误，肯定是文件被修改了。而不是，想象中那样，突然抽风或者什么客官因素。  
>所以，一定要记得，在那里修改了文件，修改了什么，什么时候修改的，都要备注一下。方便之后的检查和恢复。养成一个好习惯。  
>还有就是，别删除别人的代码，真的需要修改的就把别人的代码注释掉就好了。  
 
下面，回归正题。   
Ajax返回的是，xxx文件没有写权限。因为，后台登录有个登录日志，每次登录需要把登录信息写入一个log文件。然后，我就看了下项目文件目录的权限，发现是只读文件（本人Windows7系统）。之后我修改了目录权限，还是不行。    

后来，我看了下那个log文件的目录路径，发现，保存log文件的文件夹在项目文件里没有被创建。即是，log文件目录路径：www/项目/caches/cache\_log/log.tpl.php。项目文件里没有cache\_log文件夹，所以那个写入功能就出错了，从而导致没法写入,然后exit了，后面的代码就无法执行了（后台登录代码失效）。其实，这是本身项目那边的程序不严谨导致。一般写入之前都会判断文件夹是否存在，若不存在则自动创建。然而，项目那个写入功能则是没有这一步，若文件不存在则直接判断为没有写入权限。也是醉了。  

最后总结下：
>如果进行文件写操作的时候，一定要注意目录文件夹是否存在，若不存在则自动创建而不是手动创建。  
>程序出错，肯定是本身代码出问题了。而不是你所想的突然就不行了。需要一步一步去排查，找到问题所在。
  